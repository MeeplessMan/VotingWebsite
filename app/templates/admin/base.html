<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{%block title%}{%endblock%}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            const mainContent = document.getElementById("main-content");
            sidebar.classList.toggle("collapsed");
            if (sidebar.classList.contains("collapsed")) {
                sidebar.style.width = "70px";
                mainContent.style.marginLeft = "70px";
                document.querySelectorAll(".sidebar-text").forEach(el => el.classList.add("hidden"));
                document.querySelectorAll(".sidebar-icon").forEach(el => el.classList.add("justify-center"));
            } else {
                sidebar.style.width = "256px";
                mainContent.style.marginLeft = "256px";
                document.querySelectorAll(".sidebar-text").forEach(el => el.classList.remove("hidden"));
                document.querySelectorAll(".sidebar-icon").forEach(el => el.classList.remove("justify-center"));
            }
        }

        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.toggle("hidden");
        }

        function showSection(section) {
            const sections = document.querySelectorAll(".dashboard-section");
            sections.forEach(sec => sec.classList.add("hidden"));
            document.getElementById(section).classList.remove("hidden");
        }
    </script>
    {%block styles%}{%endblock%}
</head>
<body class="bg-gradient-to-r from-blue-50 to-blue-100 min-h-screen flex items-center justify-center">
    <div id="sidebar" class="w-64 bg-blue-900 text-white h-screen fixed left-0 top-0 overflow-hidden z-50">
        <div class="p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold sidebar-text">Admin Panel</h2>
                <button onclick="toggleSidebar()" class="text-white text-xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        {%if current_user.is_authenticated%}
            <ul class="space-y-4">
                <li>
                    <a href="{{url_for('adminIndex')}}" class="flex items-center gap-3 hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-800 sidebar-icon" onclick="showSection('dashboard')">
                        <i class="fas fa-home text-xl"></i>
                        <span class="sidebar-text">Dashboard</span>
                    </a>
                </li>
                <li class="relative">
                    <button onclick="toggleDropdown('admin-dropdown')" class="flex items-center gap-3 w-full text-left hover:text-gray-300 p-2 rounded hover:bg-blue-800 sidebar-icon">
                        <i class="fas fa-user-cog text-xl"></i>
                        <span class="sidebar-text">Admin</span>
                    </button>
                    <ul id="admin-dropdown" class="bg-blue-800 text-white p-2 rounded-xl ml-2 mt-1 hidden">
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="#" class="flex items-center gap-3">
                                <i class="fas fa-chart-line"></i>
                                <span class="sidebar-text">Analytics</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="relative">
                    <button onclick="toggleDropdown('users-dropdown')" class="flex items-center gap-3 w-full text-left hover:text-gray-300 p-2 rounded hover:bg-blue-800 sidebar-icon">
                        <i class="fas fa-users text-xl"></i>
                        <span class="sidebar-text">Users</span>
                    </button>
                    <ul id="users-dropdown" class="bg-blue-800 text-white p-2 rounded-xl ml-2 mt-1 hidden">
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{ url_for('adminUsers') }}" class="flex items-center gap-3">
                                <i class="fas fa-table"></i>
                                <span class="sidebar-text">Users Table</span>
                            </a>
                        </li>
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminUserAdd')}}" class="flex items-center gap-3">
                                <i class="fas fa-user-plus"></i>
                                <span class="sidebar-text">Add Users</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="relative">
                    <button onclick="toggleDropdown('candidate-dropdown')" class="flex items-center gap-3 w-full text-left hover:text-gray-300 p-2 rounded hover:bg-blue-800 sidebar-icon">
                        <i class="fas fa-user-friends text-xl"></i>
                        <span class="sidebar-text">Candidate</span>
                    </button>
                    <ul id="candidate-dropdown" class="bg-blue-800 text-white p-2 rounded-xl ml-2 mt-1 hidden">
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminCandidates')}}" class="flex items-center gap-3">
                                <i class="fas fa-table"></i>
                                <span class="sidebar-text">Candidate Table</span>
                            </a>
                        </li>
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminBallots')}}" class="flex items-center gap-3">
                                <i class="fas fa-plus"></i>
                                <span class="sidebar-text">Add New Candidate</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="relative">
                    <button onclick="toggleDropdown('election-dropdown')" class="flex items-center gap-3 w-full text-left hover:text-gray-300 p-2 rounded hover:bg-blue-800 sidebar-icon">
                        <i class="fas fa-vote-yea text-xl"></i>
                        <span class="sidebar-text">Election</span>
                    </button>
                    <ul id="election-dropdown" class="bg-blue-800 text-white p-2 rounded-xl ml-2 mt-1 hidden">
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="#" class="flex items-center gap-3">
                                <i class="fas fa-clipboard-list"></i>
                                <span class="sidebar-text">Current Election</span>
                            </a>
                        </li>
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminElections')}}" class="flex items-center gap-3">
                                <i class="fas fa-eye"></i>
                                <span class="sidebar-text">View All Elections</span>
                            </a>
                        </li>
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminElectionAdd')}}" class="flex items-center gap-3">
                                <i class="fas fa-plus"></i>
                                <span class="sidebar-text">Create New Election</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="relative">
                    <button onclick="toggleDropdown('ballot-dropdown')" class="flex items-center gap-3 w-full text-left hover:text-gray-300 p-2 rounded hover:bg-blue-800 sidebar-icon">
                        <i class="fas fa-box text-xl"></i>
                        <span class="sidebar-text">Ballot</span>
                    </button>
                    <ul id="ballot-dropdown" class="bg-blue-800 text-white p-2 rounded-xl ml-2 mt-1 hidden">
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminBallots')}}" class="flex items-center gap-3">
                                <i class="fas fa-eye"></i>
                                <span class="sidebar-text">View All Ballots</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="relative">
                    <button onclick="toggleDropdown('profile-dropdown')" class="flex items-center gap-3 w-full text-left hover:text-gray-300 p-2 rounded hover:bg-blue-800 sidebar-icon">
                        <i class="fas fa-user text-xl"></i>
                        <span class="sidebar-text">Profile</span>
                    </button>
                    <ul id="profile-dropdown" class="bg-blue-800 text-white p-2 rounded-xl ml-2 mt-1 hidden">
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminProfile')}}" class="flex items-center gap-3">
                                <i class="fas fa-id-badge"></i>
                                <span class="sidebar-text">Profile</span>
                            </a>
                        </li>
                        <li class="hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-700">
                            <a href="{{url_for('adminResetPassword')}}" class="flex items-center gap-3">
                                <i class="fas fa-key"></i>
                                <span class="sidebar-text">Reset Password</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="{{ url_for('adminLogout') }}" class="flex items-center gap-3 hover:text-gray-300 cursor-pointer p-2 rounded hover:bg-blue-800 sidebar-icon">
                        <i class="fas fa-sign-out text-xl"></i>
                        <span class="sidebar-text">Logout</span>
                    </a>
                </li>
            </ul>
        {%endif%}
        </div>
    </div>
    <div id="main-content" class="ml-64 p-6 flex-grow text-center">
        {%for message in get_flashed_messages()%}
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                {{message}}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        {%endfor%}
        {% block content %}{% endblock %}
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>